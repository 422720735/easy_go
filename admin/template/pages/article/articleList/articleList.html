<!-- Start Content-->
<div class="container-fluid admin-custom" id="welcome">

    <!-- start page title -->
    <div class="row">
        <div class="col-12">
            <div class="page-title-box">
                <div class="page-title-left mt-3">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/welcome"><i class="feather icon-home"></i></a></li>
                        <li class="breadcrumb-item active">文章列表</li>
                    </ol>
                </div>
            </div>
        </div>

        <div class="col-xl-12 col-md-12">
            <div class="col-md">
                <div class="card mb-3">
                    <!-- Add `.with-elements` to the parent `.card-header` element -->
                    <div class="card-header with-elements">
                        <h5 class="card-header-title mr-2">
                            文章列表
                        </h5>
                        <div class="card-header-elements ml-md-auto">
                            <button type="button" class="btn btn-xs btn-outline-primary"><a
                                        href="/article/details"><span class="ion ion-md-add"></span> 新增</a></button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="card-title">
                            <form method="get" action="/article/list" class="row">
                                <div class="col-md-3 col-sm-6 pr-0">
                                    <input type="text" class="form-control" name="title" placeholder="请输入要搜索的文章标题">
                                </div>
                                <div class="col-md-4 col-sm-6 pr-0">
                                    <select class="select2 form-control" data-toggle="select2"
                                            name="tag"
                                            data-placeholder="Choose ...">
                                        <option selected="selected" disabled="disabled" style="display: none;" value=""></option>
                                        {{range $i, $v := .articleTypeList}}
                                            {{if $v.child}}
                                                <optgroup label="{{$v.name}}">
                                                    {{range $key, $item := $v.child}}
                                                        <option value="{{$v.id}},{{$item.id}}">{{$item.name}}</option>
                                                    {{end}}
                                                </optgroup>
                                            {{else if eq $v.child_status false}}
                                                <option value="{{$v.id}}">{{$v.name}}</option>
                                            {{end}}
                                        {{end}}
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    {{/*                                    <button class="btn  btn-primary">查询</button>*/}}
                                    <button class="btn  btn-primary" type="submit">查询</button>
{{/*                                    <button class="btn  btn-danger">重置</button>*/}}
                                    <a class="btn  btn-danger" href="/article/list">重置</a>
                                </div>
                            </form>
                        </div>
                        <div class="card">
                            <table id="datatable-buttons" class="table table-striped dt-responsive nowrap" width="100%">
                                <thead>
                                <tr>
                                    <th>标题</th>
                                    <th>分类</th>
                                    <th>创建时间</th>
                                    <th>修改时间</th>
                                    <th>置顶</th>
                                    <th>点击量</th>
                                    <th>移动</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                {{range $i, $v := .articleList.list}}
                                    <tr>
                                        <td>
                                            {{if $v.Markdown}}
                                                <a href="/article/details/markdown?id={{$v.Id}}&title={{$v.Title}}"
                                                   class="text-c-blue">{{$v.Title}}</a>
                                            {{else}}
                                                <a href="/article/details?id={{$v.Id}}&title={{$v.Title}}"
                                                   class="text-c-blue">{{$v.Title}}</a>
                                            {{end}}
                                        </td>
                                        <td>20</td>
                                        <td>{{$v.CreatedTime.Format "2006-01-02 15:04:05"}}</td>
                                        {{if $v.UpdateTime}}
                                            <td>{{$v.UpdateTime.Time.Format "2006-01-02 15:04:05"}}</td>
                                        {{else}}
                                            <td>&emsp;</td>
                                        {{end}}
                                        {{if and ($v.IsTop) (eq $.top_id $v.Id)}}
                                            <td class="text-danger">置顶</td>
                                        {{else}}
                                            <td>普通</td>
                                        {{end}}
                                        <td>{{$v.View}}</td>
                                        <td>
                                            <a href="/api/article/move/up?sort={{$v.Sort}}&page={{$.current}}"
                                               title="上移">
                                                <i class="feather icon-arrow-down"></i>
                                            </a>
                                            <a href="/api/article/move/down?sort={{$v.Sort}}&page={{$.current}}"
                                               title="下移">
                                                <i class="feather icon-arrow-up"></i>

                                            </a>
                                        </td>
                                        <td>
                                            {{if $v.Visible}}
                                                <a href="/api/article/issue?id={{$v.Id}}&status={{$v.Visible}}&page={{$.current}}"
                                                   class="text-success">下架</a>
                                            {{else}}
                                                <a href="/api/article/issue?id={{$v.Id}}&status={{$v.Visible}}&page={{$.current}}"
                                                   class="text-warning">上架</a>
                                            {{end}}
                                            {{if $v.Markdown}}
                                                <a href="/article/details/markdown?id={{$v.Id}}&title={{$v.Title}}"
                                                   class="text-c-blue">详情</a>
                                            {{else}}
                                                <a href="/article/details?id={{$v.Id}}&title={{$v.Title}}"
                                                   class="text-c-blue">详情</a>
                                            {{end}}
                                            {{if $v.State}}
                                                <a href="#!" class="text-c-blue text-facebook" data-toggle="modal"
                                                   data-target="#danger-header-modal-{{$v.Id}}">已删除</a>
                                            {{else}}
                                                <a href="#!" class="text-c-blue text-danger" data-toggle="modal"
                                                   data-target="#danger-header-modal-{{$v.Id}}">删除</a>
                                            {{end}}
                                            {{if eq  $v.State false}}
                                                <div id="danger-header-modal-{{$v.Id}}" class="modal fade" tabindex="-1"
                                                     role="dialog" aria-labelledby="danger-header-modalLabel"
                                                     aria-hidden="true">
                                                    <div class="modal-dialog">
                                                        <div class="modal-content">
                                                            <div class="modal-header modal-colored-header bg-danger">
                                                                <h4 class="modal-title" id="danger-header-modalLabel">
                                                                    删除文章</h4>
                                                                <button type="button" class="close" data-dismiss="modal"
                                                                        aria-hidden="true">×
                                                                </button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <h4 class="mt-0 text-center">
                                                                    <i class="mdi text-warning mdi-alert-circle"></i>
                                                                    <span class="font-14">是否删除该文章?</span>
                                                                </h4>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary"
                                                                        data-dismiss="modal">取消
                                                                </button>
                                                                <button type="button" class="btn btn-danger"
                                                                        onclick="deleteArticle({{$v.Id}})">确认
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            {{end}}
                                        </td>
                                    </tr>
                                {{end}}
                                </tbody>
                            </table>
                        </div>
                        <div class="d-flex justify-content-end align-items-center">
                            <ul class="pagination float-right pagination-rounded justify-content-end">
                                <li class="page-item">
                                    <a class="page-link"
                                       href="{{ if eq $.articleList.current 1}}javascript:;{{ else }}?page={{.articleList.prepage}}{{ end }}"
                                       aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                </li>
                                {{if gt $.articleList.current 5}}
                                    <li class="page-item"><a class="page-link" href="javascript: void(0);">1</a></li>
                                {{end}}
                                {{ range $k,$v := .articleList.pages }}
                                    {{ if and ( gt $.articleList.current 5 ) (eq $k 0) }}
                                        <li class="page-item"><a class="page-link" href="javascript: void(0);">...</a>
                                        </li>
                                    {{ else }}
                                        <li class="page-item">
                                            {{ if eq $v $.articleList.current }}
                                                <a class="page-link"
                                                   style="color:#fff;border-color: #5d78ff;background-color: #5d78ff;width: 33px;height: 33px;text-align: center;"
                                                   href="javascript: void(0);">{{ $v }}</a>
                                            {{ else }}
                                                <a class="page-link" href="?page={{ $v }}">{{ $v }}</a>
                                            {{ end }}
                                        </li>
                                    {{ end }}
                                {{ end }}
                                <li class="page-item">
                                    <a class="page-link"
                                       href="{{ if  eq $.articleList.current .articleList.totalpages}}javascript:;{{ else }}?page={{.articleList.nextpage}}{{ end }}"
                                       aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </li>
                                <li class="page-item">
                                    <a class="page-link" href="javascript:;">共 {{ .articleList.totalpages }} 页</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- sample modal content -->
        <div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">隐藏文章</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>
                    <div class="modal-body">
                        <h4 class="mt-0 text-center">
                            <i class="mdi text-warning mdi-alert-circle"></i>
                            <span class="font-14">是否隐藏/显示该菜单？</span>
                        </h4>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end page title -->
</div>